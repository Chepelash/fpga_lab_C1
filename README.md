Модуль packet filter
====================

Модуль предназначен для фильтрации входных пакетов по нахождению заданной строки в пакете. Строка и разрешение работы задаются по интерфейсу Avalon-MM. Входной и выходной пакетные интерфейсы - Avalon-ST sink и source.


Функционально модуль состоит из друг сотавляющих:
- модуль packet_classer;
- модуль packet_resolver.


Описание параметров
-------------------

- AMM_DWIDTH - ширина шины данных интерфейса Avalon-MM. Значение по умолчанию 32;
- AST_DWIDTH - ширина шины данных интерфейса Avalon-ST. Значение по умолчанию 64;
- REG_DEPTH - количество контрольно-статусных регистров для записи искомой подстроки. Один регистр хранит значение разрешения чтения, для корректной работы минимальное значение 4. Значение по умолчанию 4;  
- BITS_PER_SYMB - количество бит на один символ. При AMM_DWIDTH = 32 и BITS_PER_SYMB = 8 в одной посылке должно быть 4 символа. Значение по умолчанию 8;
- CHANNEL_WIDTH - ширина шины сигнала channel интерфейса Avalon-ST. Для этого модуля не имеет смысл устанавливать значение больше 1. Значение по умолчанию 1.


Алгоритм работы
---------------

1. По интерфейсу Avalon-MM записывается строка для дальнейшего поиска. Строка должна быть записана в регистры по адресам от REG_DEPTH до 1. Регистр по адресу 0 является контрольным регистром, в который записывается разрешение работы модуля. Карта регистров представлена ниже.
    
    
    Карта регистров  
    <table>
      <tr>
        <th>Адрес</th>
        <th>Назначение</th>
      </tr>  
      <tr>
        <th>0x0</th>
        <th>Контрольный регистр</th>
      </tr> 
      <tr>
        <th>0x1</th>
        <th>3-0 символы ключевой строки</th>
      </tr> 
      <tr>
        <th>0x2</th>
        <th>7-4 символы ключевой строки</th>
      </tr> 
      <tr>
        <th>0x3</th>
        <th>11-8 символы ключевой строки</th>
      </tr> 
    </table>
    
    
    Адрес 0х0   
    <table>
      <tr>
        <th>Бит</th>
        <th>Название</th>
        <th>Описание</th>
      </tr>  
      <tr>
        <th>31:1</th>
        <th>Reserved</th>
        <th>---</th>
      </tr> 
      <tr>
        <th>0</th>
        <th>Enable</th>
        <th>'1' - ON, '0' - OFF</th>
      </tr> 
    </table>
   
    
1. По интерфейсу Avalon-ST пакет данных отправляется на вход модуля. Если во входном пакете есть искомая строка, то этот пакет передается на выход модуля.




